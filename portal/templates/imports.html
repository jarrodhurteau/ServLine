{% extends "base.html" %}
{% block title %}Imports · ServLine{% endblock %}

{% block content %}
  <section class="card">
    <h1 class="text-xl font-semibold mb-4">Import Jobs</h1>

    {% if jobs %}
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Filename</th>
            <th>Status</th>
            <th>Created</th>
            <th>Updated</th>
            <th class="text-right">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for j in jobs %}
            <tr>
              <td class="text-muted">#{{ j.id }}</td>
              <td>{{ j.filename }}</td>
              <td>{{ j.status or "—" }}</td>
              <td>{{ j.created_at }}</td>
              <td>{{ j.updated_at }}</td>
              <td class="text-right">
                <div class="flex justify-end gap-2">
                  <a href="/imports/view/{{ j.id }}" class="btn btn-primary">View</a>
                  <form action="/imports/{{ j.id }}/delete" method="post" style="display:inline">
                    <button type="submit" class="btn btn-danger">Delete</button>
                  </form>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="muted">No import jobs found.</p>
    {% endif %}
  </section>

  <div class="mt-4 flex gap-2">
    <form method="post" action="/imports/cleanup">
      <button class="btn btn-primary">Cleanup</button>
    </form>
    <a href="/uploads/trash" class="btn btn-secondary">Recycle Bin</a>
  </div>
{% endblock %}
